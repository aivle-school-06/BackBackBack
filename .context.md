# Development Context

## 1. Current Goal (현재 목표)
- [ ] JWT 인증 Phase 2(로그아웃/블랙리스트/동시성) 구현
- [ ] refresh_tokens 스키마/마이그레이션 반영 및 테스트
- [x] 설정/템플릿 변경 사항 커밋
- [x] Java/Spring/Spring Boot 실제 버전 확인
- [x] AGENTS.md 환경 정보 갱신
- [x] AGENTS.md 영어 예외 규칙 추가
- [x] 개인 로그 규칙 및 로그 파일 추가
- [x] 개인 로그 우선 기록/컨텍스트 갱신 규칙 반영
- [x] 사용자/권한 엔티티와 보안 기반 코드 정리

## 2. Recent Changes (최근 변경 사항)
- refactor(error): 전역 예외 처리 통합 및 공통 에러 코드 추가 (2026-01-21)
- feat(auth): JWT 인증 Phase1 구성 (2026-01-20)
- feat(auth): 레거시 ROLE_ 호환 및 컷오프 정책 적용 (2026-01-20)
- test(auth): JWT/Auth/RefreshToken 단위 테스트 추가 (2026-01-20)
- docs: 테스트 규칙 및 코드 주석 가이드 보강 (2026-01-20)
- docs: 이슈 템플릿 추가 (2026-01-20)
- chore(config): env 템플릿 및 YAML 설정 업데이트 (2026-01-19)
- chore: Java/Spring/Spring Boot 버전 확인 (2026-01-20)
- docs: AGENTS.md 환경 정보 추가 (2026-01-20)
- docs: AGENTS.md 영어 예외 규칙 추가 (2026-01-20)
- docs: 개인 로그 규칙 추가 및 로그 파일 생성 (2026-01-20)
- docs: 개인 로그 우선 기록 및 컨텍스트 갱신 규칙 반영 (2026-01-20)
- feat(user): User/Role 엔티티 및 보안 어댑터/테스트 추가 (2026-01-20)

## 3. Next Steps (다음 할 일)
1. 로그아웃/전체 로그아웃 및 Access Token 블랙리스트 구현
2. Refresh Rotation 동시성 제어(Lua 스크립트) 적용
3. refresh_tokens 테이블 마이그레이션/테스트 추가

## 4. Known Issues (알려진 문제/보류 사항)
- refresh_tokens 테이블 마이그레이션 필요
- RS256 키 파일 준비 필요

## 5. History (이전 기록)
- 2026-01-21 | 작업: 전역 예외 처리 리팩터링 | 결과: 공통 에러 코드/필드 에러 응답/GlobalExceptionHandler 추가 및 Auth 핸들러 통합 | 이슈: 없음
- 2026-01-20 | 작업: 테스트/규칙/템플릿 정비 | 결과: 단위 테스트/AGENTS 규칙/이슈 템플릿 추가 | 이슈: 없음
- 2026-01-20 | 작업: JWT 인증 Phase1 구성 | 결과: 보안 설정/토큰 발급/로그인·리프레시 API 추가 | 이슈: refresh_tokens 마이그레이션 필요
- 2026-01-20 | 작업: 사용자/권한 엔티티와 보안 기초 구현 | 결과: UserDetails 분리형 구현 및 테스트 추가 | 이슈: 없음
- 2026-01-20 | 작업: 개인 로그 우선 기록/컨텍스트 갱신 규칙 반영 | 결과: AGENTS.md 프로토콜 갱신 | 이슈: 없음
- 2026-01-20 | 작업: 개인 로그 규칙 추가 및 로그 파일 생성 | 결과: 개인 로그 프로토콜 문서화 및 로그 생성 | 이슈: git user.email 미설정으로 user.name 사용
- 2026-01-20 | 작업: AGENTS.md 영어 예외 규칙 추가 | 결과: 영어 요청 시 예외 규칙 반영 | 이슈: 없음
- 2026-01-20 | 작업: AGENTS.md 환경 정보 갱신 | 결과: 환경 버전 명시 추가 | 이슈: 없음
- 2026-01-20 | 작업: Java/Spring/Spring Boot 실제 버전 확인 | 결과: 버전 확인 완료 | 이슈: 없음
- 2026-01-19 | 작업: 설정/템플릿 변경 커밋 | 결과: 브랜치 생성 및 커밋 완료 | 이슈: 없음
- 2026-01-19 | 작업: prod/dev 환경별 YAML 분리 및 기본 프로파일 dev 설정 | 결과: YAML 분리 완료 | 이슈: 없음
- 2026-01-19 | 작업: .context.md 히스토리 항목 축약(작업/결과/이슈) | 결과: 히스토리 형식 축약 반영 | 이슈: 없음
- 2026-01-19 | 작업: 환경 변수 예시(.env.example) 제공 | 결과: 로컬/운영 env 템플릿 제공 | 이슈: 없음
